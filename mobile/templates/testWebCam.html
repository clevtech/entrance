<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Система доступа</title>
  <meta name="description" content="Cleverest Technologies App">
  <meta name="author" content="B. Ospan">
  <meta name="theme-color" content="transparent">
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
  body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif;}
  body, html {
    height: 100%;
    color: #777;
    line-height: 1.8;
  }

  /* Create a Parallax Effect */
  .bgimg-1, .bgimg-2, .bgimg-3 {
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }

  /* First image (Logo. Full height) */
  .bgimg-1 {
    background-image: url('/static/zadnik.png');
    min-height: 100%;
  }

  </style>

  <body>

  <!-- First Parallax Image with Logo Text -->
  <div class="bgimg-1 w3-display-container w3-opacity-min" id="home">
    <div class="w3-display-middle" style="white-space:nowrap;">
      <span class="w3-center w3-padding-large w3-black w3-xlarge w3-wide w3-animate-opacity">
        Введите код доступа:
      </span>
      <center>
        <br>
        <br>
      <form method = "POST" action='check/'>
      <input class="w3-black"  type="number" name="kod" value=""><br>
          <input type="hidden" name="img" value=""><br>
      <br>
      <input class="w3-black" type="button" value="Отправить" onclick="myFunction();submit();">
      </form>
      </center>
    </div>
  </div>

  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
    <br>
    <br>
    <br>
  <br>
  <br>
  <br>
  <br>
    <br>
    <br>
    <br>
  <br>
  <br>
  <br>
  <br>
    <br>
    <br>
    <br>
  <br>
  <br>
  <br>
  <br>
    <br>
    <br>
    <br>

  <video id="player" width=0 controls autoplay></video><br>
  <canvas id="canvas" width=320 height=240></canvas>
  <br>
  <br>
  <br>
  <br>

    <script>
      const player = document.getElementById('player');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');

      const constraints = {
        video: true,
      };

      // Attach the video stream to the video element and autoplay.
      navigator.mediaDevices.getUserMedia(constraints)
        .then((stream) => {
          player.srcObject = stream;
        });

       function myFunction() {
            alert("YES!");
            context.drawImage(player, 0, 0, canvas.width, canvas.height);
            document.getElementsByName("img")[0].setAttribute("value", canvas.toDataURL('image/jpeg'));
            alert("No?");
        }
    </script>

  </body>
  </html>
